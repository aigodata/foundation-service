# 用户管理API接口

## 1. 添加用户

- 描述：添加一个用户（密码可以省略，默认为服务端配置的默认密码），或者注册一个用户（指定密码）

- 地址：/api/user

- 类型：POST

- 请求

  ```
  {
  	"name":"测试用户", // 用户姓名（显示）**********必填
  	"roleId":1 // 角色ID **********必填
  	"username":"test", // 用户名 **********必填
  	"password":"123456", // 密码 **********可选，如果请求中没有指定密码，则使用服务端的默认密码123456
  	"phone":"13888888888", // 手机号
  	"email":"138@qq.com", // 邮箱
  }
  ```

- 响应

  ```
  {
      "code": 200,
      "message": "ok",
      "data": {
          "id": 5, // 用户ID
          "name": "测试用户", // 用户姓名
          "username": "test", // 用户名
          "phone": "13888888888", // 手机号
          "email": "138@qq.com", // 邮箱
          "status": 1, // 用户状态(1:正常 2:锁定)
          "createTime": "2018-06-18 17:30:39" // 创建时间
      }
  }
  ```


## 2. 更新用户

- 描述：更新一个用户

- 地址：/api/user/{id}

- 类型：PUT

- 请求

  ```
  {
  	"name":"测试用户", // 用户姓名（显示）**********必填
  	"roleId":1 // 角色ID **********必填
  	"username":"test", // 用户名 **********必填
  	"password":"123456", // 密码 **********可选，如果请求中没有指定密码，则使用用户原密码
  	"phone":"13888888888", // 手机号
  	"email":"138@qq.com", // 邮箱
  }
  ```

- 响应

  ```
  {
      "code": 200,
      "message": "ok",
      "data": {
          "count": 1 // 更新的数量
      }
  }
  ```

## 3. 修改密码

- 描述：修改当前登录用户的密码

- 地址：/api/password 

- 类型：PUT

- 请求

  ```
  {
  	"oldPassword":"123456", // 原密码
  	"newPassword":"2" // 新密码
  }
  ```

- 响应

  ```
  {
      "code": 200,
      "message": "ok",
      "data": true // true代表修改成，false代表修改失败
  }
  ```

  

## 4. 添加角色

- 描述：添加角色，同时添加相关的权限

- 地址：/api/role

- 类型：POST

- 请求

  ```
  {
  	"name":"测试角色", // 角色名称
  	"description":"测试描述", // 角色描述
  	"permissionIds":[5, 6] // 权限ID集合
  }
  ```

- 响应

  ```
  {
      "code": 200,
      "message": "ok",
      "data": {
          "id": 7, // 角色ID
          "name": "测试角色", // 角色名称
          "description": "测试描述" // 角色描述
      }
  }
  ```

  

## 5. 更新角色

- 描述：更新角色，同时更新相关的权限

- 地址：/api/role/{id}

- 类型：PUT

- 请求

  ```
  {
  	"name":"测试角色", // 角色名称
  	"description":"测试描述", // 角色描述
  	"permissionIds":[9, 10] // 权限ID集合
  }
  ```

- 响应

  ```
  {
      "code": 200,
      "message": "ok",
      "data": {
          "count": 1 // 更新数量
      }
  }
  ```

  